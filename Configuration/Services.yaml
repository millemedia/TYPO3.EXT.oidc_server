services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false
    bind:
      League\OAuth2\Server\AuthorizationServer $oidcServer: '@R3H6\OidcServer\Server\AuthorizationServer'
      OpenIDConnectServer\Repositories\IdentityProviderInterface: '@R3H6\OidcServer\Domain\Repository\UserRepository'

  R3H6\OidcServer\:
    resource: '../Classes/*'

  R3H6\OidcServer\Controller\:
    resource: '../Classes/Controller/*'
    public: true

  R3H6\OidcServer\Server\AuthorizationServer:
    class: 'League\OAuth2\Server\AuthorizationServer'
    factory: '@R3H6\OidcServer\Domain\Factory\AuthorizationServerFactory'

  OpenIDConnectServer\ClaimExtractor:
    class: 'OpenIDConnectServer\ClaimExtractor'
    factory: '@R3H6\OidcServer\Domain\Factory\ClaimExtractorFactory'

  OpenIDConnectServer\IdTokenResponse:
    public: true
    arguments:
      $identityProvider: '@R3H6\OidcServer\Domain\Repository\UserRepository'
      $claimExtractor: '@OpenIDConnectServer\ClaimExtractor'
